pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git branch: 'main', url: 'https://github.com/chauhanpranay19/NewsWebsite.git'
            }
        }
        stage('Build') {
            steps {
                echo 'Building the project...'
                // Assuming you have a build tool or process, e.g., npm
                // Uncomment the line below if you're using npm
                // bat 'npm install'
            }
        }
        stage('SonarQube Analysis') {
            steps {
                script {
                    def scannerHome = tool 'SonarQubeScanner' 
                    def sonarToken = credentials('a44ec19a-7f47-4877-863b-28a3ab6338db')
                    withSonarQubeEnv('SonarQube server') {
                        bat "${scannerHome}\\bin\\sonar-scanner -Dsonar.projectKey=my_org:NewsWebsite -Dsonar.projectName='News Website' -Dsonar.host.url=http://localhost:9000 -Dsonar.login=${sonarToken}"
                    }
                }
            }
        }
        stage('Test') {
            steps {
                echo 'Running tests...'
                // You might want to use a testing framework for JS, like Jest or Mocha
                // Uncomment the line below if you're using npm
                // bat 'npm test'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying the project...'
                // Add your deployment commands here
                // For example, you could use a tool like rsync, FTP, or deploy to a service like Netlify or Vercel
            }
        }
    }
    post {
        always {
            echo 'Pipeline completed!'
            // Optionally notify on Slack or email
        }
        success {
            echo 'Pipeline succeeded!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }
}
